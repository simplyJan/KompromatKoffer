@page
@model IndexModel
@{
    ViewData["Title"] = "компроматkoffer.de - Kompromittiere den Bundestag";

}

<div class="iconMenu">
    <a asp-page="/Database/People" title="Politiker Bestenliste" class="iconHoverPages interactionMenu"><i class="fas fa-user-circle"></i></a>
    <a asp-page="/Database/Global" asp-route-sinceDays="-7" title="Politiker Statistik" class="iconHoverPages interactionMenu"><i class="fas fa-chart-line"></i></a>
    <a asp-page="/Database/TweetDatabase" title="Tweet Datenbank" class="iconHoverPages interactionMenu"><i class="fas fa-binoculars"></i></i></a>
    <a asp-page=""
       asp-route-sortOrder="@Model.FavCountSort"
       asp-route-currentFilter="@Model.CurrentFilter" class="iconHoverPages interactionMenu" title="Most Likes"><i class="fas fa-heart"></i></a>
    <a asp-page=""
       asp-route-sortOrder="@Model.RetweetCountSort"
       asp-route-currentFilter="@Model.CurrentFilter" class="iconHoverPages interactionMenu interActionMenuSmall" title="Most Retweets"><i class="fas fa-retweet"></i></a>
    <a asp-page=""
       asp-route-sortOrder="@Model.CreatedAtSort"
       asp-route-currentFilter="@Model.CurrentFilter" class="iconHoverPages interactionMenu" title="Latest Tweets"><i class="fas fa-clock"></i></a>
</div>

<div class="interactionMenuBar">

    <form>
        <input type="text" name="SearchString" class="twitterUserSearchInput" placeholder="Search...">
    </form>

</div>

<div class="indexWarning">
    <p>Derzeit leidet die Datenbank noch unter einigen Schreibfehlern - die Vollständigkeit der Daten kann derzeit nicht garantiert werden. Die Arbeit an einer Lösung läuft 😲 </p>
    <p>Die Volltextsuche in den Tweets läuft wieder problemlos 😍</p>
</div>

<div class="lasthundred">
    <h4>@Convert.ToString(Model.TwitterStreamModel.Count()) von @Convert.ToString(Model.CompleteDB.Count()) Tweets aus dem Bundestag</h4>


    @foreach (var x in Model.TwitterStreamModel)
    {


    <div id="tweetLink">
        <a asp-page="/Database/PeopleDetail" asp-route-screenname="@x.TweetUser" asp-route-sinceDays="-7" class="dataBaseProfile"><i class="fas fa-user-circle"></i></a>
        <a href="@x.TweetUrl" target="_blank" class="tweetLink">
            <img src="@x.TweetUserPicture" />
            <br>
            @x.TweetUserName
            <br>
            <p class="profileDesc">@x.TweetUserDesc</p>

            @Html.Raw(x.TweetText)

            <hr class="IndexHR" />

            <p class="socialIconsIndex">
                <i class="fas fa-retweet"></i> @x.TweetReTweetCount &emsp; <i class="fas fa-heart"></i> @x.TweetFavoriteCount &emsp; @x.TweetCreatedAt.ToString("dd.MM.yy - H:mm")
            </p>

        </a>

        <!--
            <blockquote class="twitter-tweet" data-lang="en"><p lang="de" dir="ltr"><a href="@x.TweetUrl"></blockquote>
            <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        -->
        <a href="@x.TweetUrl" target="_blank" class="showTwitter"><i class="fab fa-twitter"></i>
        </a>


    </div>

    }

    @{
        var prevDisabled = !Model.TwitterStreamModel.HasPreviousPage ? "disabled" : "";
        var nextDisabled = !Model.TwitterStreamModel.HasNextPage ? "disabled" : "";

    }

    <div class="twitterUserPageing">
        <a asp-page=""
           asp-route-sortOrder="@Model.CurrentSort"
           asp-route-pageIndex="@(Model.TwitterStreamModel.PageIndex - 1)"
           asp-route-currentFilter="@Model.CurrentFilter"
           class="btn btn-default @prevDisabled">
            <<
        </a>
        <a asp-page=""
           asp-route-sortOrder="@Model.CurrentSort"
           asp-route-pageIndex="@(Model.TwitterStreamModel.PageIndex + 1)"
           asp-route-currentFilter="@Model.CurrentFilter"
           class="btn btn-default @nextDisabled">
            >>
        </a>

    </div>

</div>